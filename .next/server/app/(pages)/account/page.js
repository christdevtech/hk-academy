(()=>{var e={};e.id=2524,e.ids=[2524],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},5696:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>u,routeModule:()=>h,tree:()=>d});var r=s(3137),a=s(4647),n=s(4183),o=s.n(n),c=s(1775),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);s.d(t,i);let l=r.AppPageRouteModule,d=["",{children:["(pages)",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2817)),"C:\\Users\\MICHAEL\\Documents\\GitHub\\hk-academy\\src\\app\\(pages)\\account\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.bind(s,5653)),"C:\\Users\\MICHAEL\\Documents\\GitHub\\hk-academy\\src\\app\\(pages)\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3719)),"C:\\Users\\MICHAEL\\Documents\\GitHub\\hk-academy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\MICHAEL\\Documents\\GitHub\\hk-academy\\src\\app\\(pages)\\account\\page.tsx"],m="/(pages)/account/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new l({definition:{kind:a.x.APP_PAGE,page:"/(pages)/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6192:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1297,23)),Promise.resolve().then(s.t.bind(s,2796,23)),Promise.resolve().then(s.bind(s,9496)),Promise.resolve().then(s.bind(s,3264)),Promise.resolve().then(s.bind(s,1821))},1821:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(80),a=s(9885),n=s(6558),o=s(7114),c=s(9496),i=s(2672),l=s(2655),d=s(8693),u=s(9117),m=s.n(u);let p=()=>{let[e,t]=(0,a.useState)(""),[s,u]=(0,a.useState)(""),{user:p,setUser:h}=(0,d.a)(),[x,g]=(0,a.useState)(!1),{register:_,handleSubmit:b,formState:{errors:y,isLoading:j},reset:f,watch:w}=(0,n.cI)(),C=(0,a.useRef)({});C.current=w("password","");let v=(0,o.useRouter)(),P=(0,a.useCallback)(async e=>{if(p){let s=await fetch(`https://hkacademy.net/api/users/${p.id}`,{credentials:"include",method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(s.ok){let e=await s.json();h(e.doc),u("Successfully updated account."),t(""),g(!1),f({email:e.doc.email,name:e.doc.name,password:"",passwordConfirm:""})}else t("There was a problem updating your account.")}},[p,h,f]);return(0,a.useEffect)(()=>{null===p&&v.push(`/login?error=${encodeURIComponent("You must be logged in to view this page.")}&redirect=${encodeURIComponent("/account")}`),p&&f({email:p.email,name:p.name,password:"",passwordConfirm:""})},[p,v,f,x]),(0,r.jsxs)("form",{onSubmit:b(P),className:m().form,children:[r.jsx(l.v,{error:e,success:s,className:m().message}),x?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("p",{children:["Change your password below, or ",r.jsx("button",{type:"button",className:m().changePassword,onClick:()=>g(!x),children:"cancel"}),"."]}),r.jsx(i.I,{name:"password",type:"password",label:"Password",required:!0,register:_,error:y.password}),r.jsx(i.I,{name:"passwordConfirm",type:"password",label:"Confirm Password",required:!0,register:_,validate:e=>e===C.current||"The passwords do not match",error:y.passwordConfirm})]}):(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("p",{children:["Change your account details below, or ",r.jsx("button",{type:"button",className:m().changePassword,onClick:()=>g(!x),children:"click here"})," to change your password."]}),r.jsx(i.I,{name:"email",label:"Email Address",required:!0,register:_,error:y.email,type:"email"}),r.jsx(i.I,{name:"name",label:"Name",register:_,error:y.name})]}),r.jsx(c.Button,{type:"submit",label:j?"Processing":x?"Change Password":"Update Account",disabled:j,appearance:"primary",className:m().submit})]})}},9117:e=>{e.exports={form:"AccountForm_form__lSVWE",changePassword:"AccountForm_changePassword__92rDX",submit:"AccountForm_submit__sVozx"},e.exports.__checksum="c6acafd35efe"},9472:e=>{e.exports={account:"account_account__B33_e",params:"account_params__ICrtr",column:"account_column__JAHeq",comment:"account_comment___3zB2",meta:"account_meta__9IH4q"},e.exports.__checksum="6deb46318c3d"},9593:e=>{e.exports={hr:"HR_hr__KdVl9"},e.exports.__checksum="6f3e37085b8c"},967:e=>{e.exports={},e.exports.__checksum="73ff4aef96d0"},2817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P,metadata:()=>A});var r=s(8144),a=s(3830),n=s(4602),o=s.n(n),c=s(6825),i=s(600),l=s(3205),d=s(9593),u=s.n(d);let m=e=>{let{className:t}=e;return r.jsx("hr",{className:[t,u().hr].filter(Boolean).join(" ")})};var p=s(7979),h=s(5509),x=s(6993),g=s(1978),_=s(2208),b=s(7536);let y=(0,b.createProxy)(String.raw`C:\Users\MICHAEL\Documents\GitHub\hk-academy\src\app\(pages)\account\AccountForm\index.tsx`),{__esModule:j,$$typeof:f}=y,w=y.default;var C=s(9472),v=s.n(C);async function P(){let{user:e}=await (0,g.S)({nullUserRedirect:`/login?error=${encodeURIComponent("You must be logged in to access your account.")}&redirect=${encodeURIComponent("/account")}`}),t=await (0,c.t)({user:e?.id});return(0,r.jsxs)(a.Fragment,{children:[r.jsx(l.T,{children:r.jsx(p.n,{className:v().params})}),r.jsx(h.R,{type:"lowImpact",media:null,richText:[{type:"h1",children:[{text:"Account"}]},{type:"paragraph",children:[{text:"This is your account dashboard. Here you can update your account information, view your comment history, and more. To manage all users, "},{type:"link",url:"/admin/collections/users",children:[{text:"login to the admin dashboard."}]}]}]}),(0,r.jsxs)(l.T,{className:v().account,children:[r.jsx(w,{}),r.jsx(m,{}),r.jsx("h2",{children:"Comments"}),r.jsx("p",{children:"These are the comments you have placed over time. Each comment is associated with a specific post. All comments must be approved by an admin before they appear on the site."}),r.jsx(m,{}),t?.length===0&&r.jsx("p",{children:"You have not made any comments yet."}),t.length>0&&t?.map((e,s)=>{let{doc:n,comment:c,createdAt:i}=e;return c?r.jsxs(a.Fragment,{children:[r.jsxs("div",{className:v().column,children:[r.jsxs("p",{className:v().comment,children:['"',c,'"']}),r.jsxs("p",{className:v().meta,children:["Posted ",n&&"object"==typeof n&&r.jsxs(a.Fragment,{children:[" to ",r.jsx(o(),{href:`/posts/${n?.slug}`,children:n?.title||"Untitled Post"})]}),i&&` on ${x.o(i)}`]})]}),s<t.length-1&&r.jsx(m,{})]},s):null}),r.jsx(m,{}),r.jsx(i.z,{href:"/logout",appearance:"secondary",label:"Log out"})]})]})}let A={title:"Account",description:"Create an account or log in to your existing account.",openGraph:(0,_.T)({title:"Account",url:"/account"})}},5509:(e,t,s)=>{"use strict";s.d(t,{R:()=>l});var r=s(8144);s(3830);var a=s(3205),n=s(702),o=s(864),c=s(967),i=s.n(c);let l=({richText:e})=>r.jsx(a.T,{className:i().lowImpactHero,children:r.jsx("div",{className:i().content,children:r.jsx(o.G,{children:r.jsx(n.Z,{className:i().richText,content:e})})})})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4650,2560,345,3497,5094,6558,9859,6465,4769,1369,702,484,571,3435],()=>s(5696));module.exports=r})();